model:
  name: 'MinkUNet34_SD'
  in_feat_size: 1
  out_classes: 16
  ignore_label: -1

source_dataset:
  name: 'MspcLiDAR_32'
  dataset_path: '/home/chenzhe/data/MspcLiDAR/kitti/sem_lidar32/'
  mapping_path: '/home/chenzhe/PC_DA/core/datasets/mapping_cfg/mspclidar.yaml'

  voxel_size: 0.05
  use_intensity: False
  sub_numpts:
  balance_weights: False
  augmentation:
    z_rotate: True
    random_flip: True
    random_jitter: False
    random_scale: True
    
target_dataset:
  # name: 'MspcLiDAR_128'
  name: 'MspcLiDAR_64'
  # name: 'MspcLiDAR_32'
  # dataset_path: '/home/chenzhe/data/MspcLiDAR/kitti/sem_lidar128/'
  dataset_path: '/home/chenzhe/data/MspcLiDAR/kitti/sem_lidar64/'
  # dataset_path: '/home/chenzhe/data/MspcLiDAR/kitti/sem_lidar32/'
  mapping_path: '/home/chenzhe/PC_DA/core/datasets/mapping_cfg/mspclidar.yaml'
  voxel_size: 0.05
  use_intensity: False
  sub_numpts:
  balance_weights: False
  augmentation:
    z_rotate: True
    random_flip: True
    random_jitter: False
    random_scale: True

src_dataloader:
  batch_size: 6
  num_workers: 6

tgt_dataloader:
  batch_size: 6
  num_workers: 6

pipeline:
  epochs: 50
  gpus: 0
  seed: 1234
  validate: True
  resume_lb: '/home/chenzhe/PC_DA/results/sem_lidar32_MinkUnet34_CosineAnnealingLR_noBW/model_epoch046.pth'
  # resume_lb: ''
  # resume_lb: '/home/chenzhe/PC_DA/results/exp/sem_lidar64_MinkUnet34_CosineAnnealingLR_noBW_fullaug/model_epoch046.pth'
  # resume_lb: '/home/chenzhe/PC_DA/results/sem_lidar64_MinkUnet34_CosineAnnealingLR_noBW/model_epoch047.pth'
  # resume_lb: '/home/chenzhe/PC_DA/results/sem_lidar128_MinkUnet34_CosineAnnealingLR_noBW/model_epoch048.pth'
  # resume_hb: '/home/chenzhe/PC_DA/results/sem_lidar128_MinkUnet34_CosineAnnealingLR/model_epoch046.pth'
  # resume_hb: '/home/chenzhe/PC_DA/results/sem_lidar64_MinkUnet34_CosineAnnealingLR/model_epoch048.pth'
  # resume_hb: '/home/chenzhe/PC_DA/results/MspcLiDAR64_source_InvWeights/model_epoch048.pth'
  resume_hb: '/home/chenzhe/PC_DA/results/exp/sem_lidar64_MinkUnet34_CosineAnnealingLR_noBW_fullaug/model_epoch046.pth'
  # resume_hb: '/home/chenzhe/PC_DA/results/sem_lidar64_MinkUnet34_CosineAnnealingLR_noBW/model_epoch047.pth'
  # resume_hb: '/home/chenzhe/PC_DA/results/sem_lidar128_MinkUnet34_CosineAnnealingLR_noBW/model_epoch048.pth'
  criterion: 'CELoss'

  optimizer_name: 'SGD' # [SGD, Adam]

  optimizer_SGD: 
    lr: 0.002
    momentum: 0.98
    weight_decay: 0.0001
  optimizer_Adam:
    lr: 0.002

  scheduler: 'CosineAnnealingLR'

distill:
  balance_weights: True
  multi_level: True
  CL_BLOCKS: ['block4', 'block5', 'block6', 'block7', 'block8']
  RETURN_BLOCKS: ['block4', 'block5', 'block6', 'block7', 'block8']
  LAMBDA_FEAT: 1
  LAMBDA_OUT: 10
  find_TP: True
  use_momentum: True
  momentum: 0.95
  tau: 0.5
  DELTA: 0.5
  # CV_DIR: ''
  # CV_DIR: 'results/MspcLiDAR_64to32_MinkUnet34_init_invWeightsCL'
  # CV_DIR: '/results/MspcLiDAR_HB2LB_MinkUnet34_128to32'
  # CV_DIR: 'results/MspcLiDAR_HB2LB_MinkUnet34_64to32_init_invWeightsCL'
  CV_DIR: '/home/chenzhe/PC_DA/results/exp/HB64_Proto'

# OUTPUT_DIR: 'results/MspcLiDAR_HB2LB_MinkUnet34_128to32'
# OUTPUT_DIR: 'results/MspcLiDAR_HB2LB_MinkUnet34_64to32_init_invWeightsCL'
# OUTPUT_DIR: 'results/MspcLiDAR_64to32_MinkUnet34_init_invWeightsCL'
# OUTPUT_DIR: 'results/exp/MspcLiDAR_64to32_MinkUnet34_init_invWeightsCL_noBW_resumefrom128'
OUTPUT_DIR: 'results/exp/MspcLiDAR_64to32_MinkUnet34_init_invWeightsCL_noBW'
# OUTPUT_DIR: 'results/SPCGSS_resume_64_mspclidar32'

tgt2src_mapping:
src2tgt_mapping:
